(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7382],{6648:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/example/population-pyramid",function(){return r(7179)}])},9973:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(7294);let i=e=>{let t=()=>({width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}),[r,i]=(0,n.useState)(t),s=()=>{i(t())};return(0,n.useEffect)(()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[]),(0,n.useLayoutEffect)(()=>{s()},[]),r}},7179:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(5893),i=r(7294),s=r(1664),l=r.n(s),a=r(8657),o=r(6824);let c=e=>{let{path:t,color:r,opacity:i}=e,s=(0,o.q_)({to:{path:t,color:r,opacity:i},config:{friction:5,tension:15}});return(0,n.jsx)(o.q.path,{d:s.path,fill:"none",stroke:r,strokeWidth:2,opacity:i})},h=a.BYU().range(["blue","white"]).domain([1950,2100]),d=a.BYU().range([0,1]).domain([1950,2100]);var u=r(5595),x=r.n(u);let p={top:30,right:0,bottom:30,left:0},m=e=>{let{width:t,height:r,data:s,selectedGroup:l,highlightedYear:o}=e,u=t-p.right-p.left,m=r-p.top-p.bottom,[f,g]=(0,i.useState)(null),v=(0,i.useMemo)(()=>s.filter(e=>e.Location===l),[l]),w=(0,i.useMemo)(()=>[...new Set(s.map(e=>e.Time))].sort(),[s]);w[0],w[w.length-1];let j=(0,i.useMemo)(()=>a.BYU().range([m,0]).domain([0,100]),[m]),y=a.BYU().range([0,u/2-10]).domain([10,0]),b=a.BYU().range([u/2+10,u]).domain([0,10]),N=a.jvg().x(e=>y(Number(e.PopMale))).y(e=>j(Number(e.AgeGrpStart))),k=a.jvg().x(e=>b(Number(e.PopFemale))).y(e=>j(Number(e.AgeGrpStart))),_=(0,i.useMemo)(()=>w.map(e=>{let t=N(v.filter(t=>t.Time===e));return(0,n.jsx)(c,{path:t,color:h(e),opacity:d(e)})}),[w,v,t,r]),S=(0,i.useMemo)(()=>w.map(e=>{let t=k(v.filter(t=>t.Time===e));return(0,n.jsx)(c,{path:t,color:h(e),opacity:d(e)})}),[w,v,t,r]),E=N(v.filter(e=>e.Time===String(o))),L=k(v.filter(e=>e.Time===String(o)));return(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("svg",{width:t,height:r,children:[(0,n.jsx)("text",{x:t/2,y:15,fill:"white",opacity:.3,fontSize:10,alignmentBaseline:"central",textAnchor:"middle",children:"100 years old"}),(0,n.jsx)("line",{x1:t/2-5,y1:32,x2:t/2+5,y2:32,stroke:"white",opacity:1,strokeWidth:.5}),(0,n.jsx)("text",{x:t/2,y:r-15,fill:"white",opacity:.3,fontSize:10,alignmentBaseline:"central",textAnchor:"middle",children:"0 years old"}),(0,n.jsx)("line",{x1:t/2-5,y1:r-p.top,x2:t/2+5,y2:r-p.top,stroke:"white",opacity:1,strokeWidth:.5}),(0,n.jsxs)("g",{width:u,height:m,transform:"translate(".concat([p.left,p.top].join(","),")"),className:o?x().hasHighlight:"",onMouseMove:e=>{let{clientY:t}=e,{top:r}=e.target.getBoundingClientRect(),n=t-r;n>=0&&n<=m&&g(n)},onMouseLeave:()=>g(null),children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"transparent"}),_,S,f&&(0,n.jsxs)("g",{children:[(0,n.jsx)("line",{x1:100,x2:t-100,y1:f,y2:f,stroke:"white",strokeDasharray:"5,5"}),(0,n.jsx)("text",{x:t-100-70,y:f-10,fill:"white",fontSize:12,children:Math.round(j.invert(f))+" years old"})]})]}),o&&(0,n.jsxs)("g",{width:u,height:m,transform:"translate(".concat([p.left,p.top].join(","),")"),children:[(0,n.jsx)(c,{path:E,color:"red",opacity:1}),(0,n.jsx)(c,{path:L,color:"red",opacity:1})]})]})})},f=e=>{let{selectedItem:t,setSelectedItem:r,items:s}=e,l=(0,i.useRef)(null),a=(0,i.useRef)([]),o=e=>{let t=a.current[e];t&&t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})};(0,i.useEffect)(()=>{o(t)},[t]),(0,i.useEffect)(()=>{let e=e=>{if("ArrowRight"!==e.key&&"ArrowLeft"!==e.key)return;e.preventDefault();let n=t;"ArrowRight"===e.key?n+=1:"ArrowLeft"===e.key&&(n-=1),n<0&&(n=s.length-1),n>s.length-1&&(n=0),r(n)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,r,s]);let c=s.map((e,i)=>{let s=e.split("---")[0],l=e.split("---")[1];return(0,n.jsx)("button",{className:"text-xs px-2 py-1 bg-black border text-white rounded-lg whitespace-nowrap flex-shrink-0 ".concat(i===t?"opacity-100 border-blue-500":"opacity-40 border-white border-opacity-40"),onClick:()=>r(i),ref:e=>a.current[i]=e,children:[...l.toUpperCase()].map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).reduce((e,t)=>"".concat(e).concat(t))+" "+s},i)});return(0,n.jsxs)("div",{className:"relative max-w-lg",children:[(0,n.jsx)("div",{ref:l,className:"overflow-scroll w-full flex gap-1 noScrollBar",children:c}),(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 w-28 h-full  bg-gradient-to-r from-black to-transparent pointer-events-none"}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 w-28 h-full  bg-gradient-to-l from-black to-transparent pointer-events-none"})]})};var g=r(3934),v=r.n(g);let w=[];for(let e=1950;e<=2100;e+=15)w.push(e);let j=e=>{let{setHighlightedYear:t}=e,r=(0,i.useRef)(null),s=w.map(e=>(0,n.jsxs)("div",{className:"flex items-center h-2 "+v().yearItem,onMouseOver:()=>{r.current&&r.current.classList.add(v().hasHighlight),t(e)},onMouseLeave:()=>{r.current&&r.current.classList.remove(v().hasHighlight),t(void 0)},children:[(0,n.jsx)("div",{style:{backgroundColor:h(e)},className:"w-full h-1"}),(0,n.jsx)("span",{className:"text-xs text-white pl-2 pointer-events-none "+v().yearText,children:e})]}));return(0,n.jsx)("div",{ref:r,className:"relative flex flex-col w-12",children:s})};var y=r(9973);let b=()=>{let[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)(0),[l,o]=(0,i.useState)(!0),[c,h]=(0,i.useState)(),d=(0,i.useRef)(null),u=(0,y.B)(d),x=(0,i.useMemo)(()=>[...new Set(e.map(e=>e.Location))].sort(),[e]),p=(0,i.useMemo)(()=>[...new Set(e.map(e=>e.Location+"---"+e.ISO2_code))].sort(),[e]),g=x.findIndex(e=>"France"===e),v=x.findIndex(e=>"Bahrain"===e),w=x.findIndex(e=>"Japan"===e),b=x.findIndex(e=>"Nigeria"===e),N=l?e:e.filter(e=>2024>Number(e.Time));(0,i.useEffect)(()=>{(0,a.gyn)("https://raw.githubusercontent.com/holtzy/react-graph-gallery/main/data/population-pyramid-percentage.csv").then(e=>{t(e)}).catch(e=>{console.error("Error loading the CSV data",e)})},[]);let k=(0,n.jsx)("div",{ref:d,className:"w-full h-full max-w-5xl",children:(0,n.jsx)(m,{data:N||e,width:u.width,height:u.height,selectedGroup:x[r],highlightedYear:c})}),_=(0,n.jsx)("div",{className:"relative w-full h-12 flex justify-center",children:(0,n.jsx)(f,{selectedItem:r,items:p,setSelectedItem:s})}),S=(0,n.jsxs)("div",{className:"text-white text-sm flex flex-col justify-center items-center",children:[(0,n.jsx)("p",{className:"text-gray-400 text-xl uppercase",children:"Watch the world..."}),(0,n.jsx)("p",{className:"text-7xl whitespace-nowrap",children:"Getting older"}),(0,n.jsx)("div",{className:"mt-4 max-w-lg text-center opacity-40",children:(0,n.jsxs)("p",{children:["Some countries are experiencing an"," ",(0,n.jsx)("a",{onClick:()=>{s(w)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"aging population"}),", while others are in the midst of a"," ",(0,n.jsx)("a",{onClick:()=>{s(b)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"baby boom"}),". Some face unusual demographic"," ",(0,n.jsx)("a",{onClick:()=>{s(v)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"shifts"})," ","when some others are surprisingly"," ",(0,n.jsx)("a",{onClick:()=>{s(g)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"stable"}),". Dive into the intriguing patterns of global population dynamics with this captivating set of lines."]})})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"block md:hidden",children:(0,n.jsx)("p",{className:"text-white",children:"SMALL SCREEN"})}),(0,n.jsx)("div",{className:"hidden md:block lg:hidden",children:(0,n.jsx)("p",{className:"text-white",children:"MEDIUM SCREEN"})}),(0,n.jsxs)("div",{className:"relative hidden lg:block pt-32",children:[S,_,(0,n.jsx)("div",{className:"relative flex justify-center",style:{height:"calc(100vh - 100px)"},children:k}),(0,n.jsx)("div",{className:"fixed top-1/2 left-10 transform -translate-x-1/2",children:(0,n.jsx)(j,{setHighlightedYear:h})})]})]})};function N(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-black",children:(0,n.jsx)(b,{})}),(0,n.jsxs)("div",{className:"wrapper bg-gray-700",children:[(0,n.jsx)("div",{children:"About"}),(0,n.jsx)("br",{}),(0,n.jsx)("h1",{children:"Dataset"}),(0,n.jsx)("p",{children:"Coming from the United Nation"}),(0,n.jsx)("p",{children:"Not sure how prevision are made?"}),(0,n.jsx)("p",{children:"Inspiration from Camaroe"}),(0,n.jsx)("p",{children:"Tools? React, react spring, R, data.table."}),(0,n.jsx)("p",{children:"Love data viz? Show newsletter."})]})]})}n.Fragment,l(),l(),l()},3934:function(e){e.exports={hasHighlight:"legend_hasHighlight__OVupl",yearItem:"legend_yearItem__3KkfD",yearText:"legend_yearText__ppahQ"}},5595:function(e){e.exports={hasHighlight:"population-pyramid_hasHighlight__LGkVH"}},6824:function(e,t,r){"use strict";r.d(t,{q:function(){return n.q},q_:function(){return n.q_},to:function(){return n.to},vc:function(){return n.vc}});var n=r(2236)}},function(e){e.O(0,[1664,8657,2236,9774,2888,179],function(){return e(e.s=6648)}),_N_E=e.O()}]);