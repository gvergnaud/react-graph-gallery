(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7382],{6648:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/example/population-pyramid",function(){return r(7179)}])},9973:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(7294);let i=e=>{let t=()=>({width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}),[r,i]=(0,n.useState)(t),s=()=>{i(t())};return(0,n.useEffect)(()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[]),(0,n.useLayoutEffect)(()=>{s()},[]),r}},7179:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(5893),i=r(7294),s=r(1664),l=r.n(s),a=r(8657),o=r(6824);let c=e=>{let{path:t,color:r,opacity:i}=e,s=(0,o.q_)({to:{path:t,color:r,opacity:i},config:{friction:5,tension:15}});return(0,n.jsx)(o.q.path,{d:s.path,fill:"none",stroke:r,strokeWidth:2,opacity:i})},h=a.BYU().range(["blue","white"]).domain([1950,2100]),d=a.BYU().range([0,1]).domain([1950,2100]);var u=r(5595),x=r.n(u);let m={top:30,right:0,bottom:30,left:0},f=e=>{let{width:t,height:r,data:s,selectedGroup:l,highlightedYear:o}=e,u=t-m.right-m.left,f=r-m.top-m.bottom,[p,g]=(0,i.useState)(null),w=(0,i.useMemo)(()=>s.filter(e=>e.Location===l),[l]),j=(0,i.useMemo)(()=>[...new Set(s.map(e=>e.Time))].sort(),[s]);j[0],j[j.length-1];let v=(0,i.useMemo)(()=>a.BYU().range([f,0]).domain([0,100]),[f]),y=a.BYU().range([0,u/2-10]).domain([10,0]),b=a.BYU().range([u/2+10,u]).domain([0,10]),N=a.jvg().x(e=>y(Number(e.PopMale))).y(e=>v(Number(e.AgeGrpStart))),k=a.jvg().x(e=>b(Number(e.PopFemale))).y(e=>v(Number(e.AgeGrpStart))),_=(0,i.useMemo)(()=>j.map(e=>{let t=N(w.filter(t=>t.Time===e));return(0,n.jsx)(c,{path:t,color:h(e),opacity:d(e)})}),[j,w,t,r]),S=(0,i.useMemo)(()=>j.map(e=>{let t=k(w.filter(t=>t.Time===e));return(0,n.jsx)(c,{path:t,color:h(e),opacity:d(e)})}),[j,w,t,r]),E=N(w.filter(e=>e.Time===String(o))),C=k(w.filter(e=>e.Time===String(o)));return(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("svg",{width:t,height:r,children:[(0,n.jsx)("text",{x:t/2,y:15,fill:"white",fontSize:10,alignmentBaseline:"central",textAnchor:"middle",children:"100 years old"}),(0,n.jsx)("line",{x1:t/2-5,y1:32,x2:t/2+5,y2:32,stroke:"white",opacity:1,strokeWidth:.5}),(0,n.jsx)("text",{x:t/2,y:r-15,fill:"white",fontSize:10,alignmentBaseline:"central",textAnchor:"middle",children:"0 years old"}),(0,n.jsx)("line",{x1:t/2-5,y1:r-m.top,x2:t/2+5,y2:r-m.top,stroke:"white",opacity:1,strokeWidth:.5}),(0,n.jsxs)("g",{width:u,height:f,transform:"translate(".concat([m.left,m.top].join(","),")"),className:o?x().hasHighlight:"",onMouseMove:e=>{let{clientY:t}=e,{top:r}=e.target.getBoundingClientRect(),n=t-r;n>=0&&n<=f&&g(n)},onMouseLeave:()=>g(null),children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"transparent"}),_,S,p&&(0,n.jsxs)("g",{children:[(0,n.jsx)("line",{x1:100,x2:t-100,y1:p,y2:p,stroke:"white",strokeDasharray:"5,5"}),(0,n.jsx)("text",{x:t-100-70,y:p-10,fill:"white",fontSize:12,children:Math.round(v.invert(p))+" years old"})]})]}),o&&(0,n.jsxs)("g",{width:u,height:f,transform:"translate(".concat([m.left,m.top].join(","),")"),children:[(0,n.jsx)(c,{path:E,color:"red",opacity:1}),(0,n.jsx)(c,{path:C,color:"red",opacity:1})]})]})})},p=e=>{let{selectedItem:t,setSelectedItem:r,items:s}=e,l=(0,i.useRef)(null),a=(0,i.useRef)([]),o=e=>{let t=a.current[e];t&&t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})};(0,i.useEffect)(()=>{let e=e=>{if("ArrowRight"!==e.key&&"ArrowLeft"!==e.key)return;let n=t;"ArrowRight"===e.key?n+=1:"ArrowLeft"===e.key&&(n-=1),n<0&&(n=s.length-1),n>s.length-1&&(n=0),r(n),o(n)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,r,s]);let c=s.map((e,i)=>{let s=e.split("---")[0],l=e.split("---")[1];return(0,n.jsx)("button",{className:"text-xs px-2 py-1 bg-black border text-white rounded-lg whitespace-nowrap flex-shrink-0 ".concat(i===t?"opacity-100 border-blue-500":"opacity-70 border-white"),onClick:()=>r(i),ref:e=>a.current[i]=e,children:[...l.toUpperCase()].map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).reduce((e,t)=>"".concat(e).concat(t))+" "+s},i)});return(0,n.jsxs)("div",{className:"relative max-w-3xl",children:[(0,n.jsx)("div",{ref:l,className:"overflow-scroll w-full flex gap-1 noScrollBar",children:c}),(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 w-28 h-full  bg-gradient-to-r from-black to-transparent pointer-events-none"}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 w-28 h-full  bg-gradient-to-l from-black to-transparent pointer-events-none"})]})};var g=r(3934),w=r.n(g);let j=[];for(let e=1950;e<=2100;e+=15)j.push(e);let v=e=>{let{setHighlightedYear:t}=e,r=(0,i.useRef)(null),s=j.map(e=>(0,n.jsxs)("div",{className:"flex items-center h-2 "+w().yearItem,onMouseOver:()=>{r.current&&r.current.classList.add(w().hasHighlight),t(e)},onMouseLeave:()=>{r.current&&r.current.classList.remove(w().hasHighlight),t(void 0)},children:[(0,n.jsx)("div",{style:{backgroundColor:h(e)},className:"w-full h-1"}),(0,n.jsx)("span",{className:"text-xs text-white pl-2 pointer-events-none "+w().yearText,children:e})]}));return(0,n.jsxs)("div",{ref:r,className:"relative flex flex-col w-12",children:[s,(0,n.jsx)("div",{className:"absolute top-0 left-0 transform -translate-x-full -translate-y-1/2",children:(0,n.jsx)("span",{className:"text-xs text-white pr-2",children:"1950"})}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 transform -translate-x-full translate-y-1/2",children:(0,n.jsx)("span",{className:"text-xs text-white pr-2",children:"2100"})})]})};var y=r(9973);let b=()=>{let[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)(0),[l,o]=(0,i.useState)(!0),[c,h]=(0,i.useState)(),d=(0,i.useRef)(null),u=(0,y.B)(d),x=(0,i.useMemo)(()=>[...new Set(e.map(e=>e.Location))].sort(),[e]),m=x.findIndex(e=>"France"===e),g=x.findIndex(e=>"Bahrain"===e),w=x.findIndex(e=>"Japan"===e);x.findIndex(e=>"India"===e);let j=x.findIndex(e=>"Nigeria"===e),b=(0,i.useMemo)(()=>[...new Set(e.map(e=>e.Location+"---"+e.ISO2_code))],[e]),N=l?e:e.filter(e=>2024>Number(e.Time));(0,i.useEffect)(()=>{(0,a.gyn)("https://raw.githubusercontent.com/holtzy/react-graph-gallery/main/data/population-pyramid-percentage.csv").then(e=>{t(e)}).catch(e=>{console.error("Error loading the CSV data",e)})},[]);let k=(0,n.jsx)("div",{ref:d,className:"w-full flex-grow",children:(0,n.jsx)(f,{data:N||e,width:u.width,height:u.height,selectedGroup:x[r],highlightedYear:c})}),_=(0,n.jsx)("div",{className:"relative w-full flex flex-col justify-center h-12",children:(0,n.jsx)(p,{selectedItem:r,items:b,setSelectedItem:s})}),S=(0,n.jsxs)("div",{className:"text-white text-sm",children:[(0,n.jsx)("p",{className:"text-gray-400 text-xl uppercase",children:"Watch the world..."}),(0,n.jsx)("p",{className:"text-7xl whitespace-nowrap",children:"Getting older"}),(0,n.jsxs)("div",{className:"mt-12",children:[(0,n.jsxs)("p",{children:["Some countries are experiencing an"," ",(0,n.jsx)("a",{onClick:()=>{s(w)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"aging population"}),", while others are in the midst of a"," ",(0,n.jsx)("a",{onClick:()=>{s(j)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"baby boom"}),"."]}),(0,n.jsxs)("p",{children:["Some face unusual demographic"," ",(0,n.jsx)("a",{onClick:()=>{s(g)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"shifts"})," ","when some others are surprisingly"," ",(0,n.jsx)("a",{onClick:()=>{s(m)},className:"cursor-pointer text-blue-400 hover:text-blue-500 hover:underline",children:"stable"}),"."]}),(0,n.jsx)("p",{children:"Dive into the intriguing patterns of global population dynamics with this captivating set of lines."}),(0,n.jsxs)("p",{children:["A project by ",(0,n.jsx)("a",{href:"https://www.yan-holtz.com",children:"Yan Holtz"})]}),(0,n.jsx)("p",{children:"Pro Tip: arrows to switch. Command K to search for a country."})]})]});return x[r],(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"block md:hidden",children:(0,n.jsx)("p",{className:"text-white",children:"SMALL SCREEN"})}),(0,n.jsx)("div",{className:"hidden md:block lg:hidden",children:(0,n.jsx)("p",{className:"text-white",children:"MEDIUM SCREEN"})}),(0,n.jsx)("div",{className:"relative h-full w-full hidden lg:block ",children:(0,n.jsxs)("div",{className:"relative h-full w-full flex flex-row justify-center items-start",children:[(0,n.jsxs)("div",{className:"w-96 overflow-visible mt-24 transform translate-x-20",children:[S,(0,n.jsx)("div",{className:"ml-24 mt-8",children:(0,n.jsx)(v,{setHighlightedYear:h})})]}),(0,n.jsxs)("div",{className:"relative flex flex-col justify-center items-center overflow-hidden  h-full",children:[k,_]})]})})]})};function N(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"relative h-screen w-screen bg-black",children:(0,n.jsx)(b,{})}),(0,n.jsxs)("div",{className:"wrapper bg-gray-700",children:[(0,n.jsx)("div",{children:"About"}),(0,n.jsx)("br",{}),(0,n.jsx)("h1",{children:"Dataset"}),(0,n.jsx)("p",{children:"Coming from the United Nation"}),(0,n.jsx)("p",{children:"Not sure how prevision are made?"}),(0,n.jsx)("p",{children:"Inspiration from Camaroe"}),(0,n.jsx)("p",{children:"Tools? React, react spring, R, data.table."}),(0,n.jsx)("p",{children:"Love data viz? Show newsletter."})]})]})}n.Fragment,l(),l(),l()},3934:function(e){e.exports={hasHighlight:"legend_hasHighlight__OVupl",yearItem:"legend_yearItem__3KkfD",yearText:"legend_yearText__ppahQ"}},5595:function(e){e.exports={hasHighlight:"population-pyramid_hasHighlight__LGkVH"}},6824:function(e,t,r){"use strict";r.d(t,{q:function(){return n.q},q_:function(){return n.q_},to:function(){return n.to},vc:function(){return n.vc}});var n=r(2236)}},function(e){e.O(0,[1664,8657,2236,9774,2888,179],function(){return e(e.s=6648)}),_N_E=e.O()}]);