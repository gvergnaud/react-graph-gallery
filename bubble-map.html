<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>How to build a bubble map component with React and D3.</title><meta name="description" content="A step-by-step guide to build your very own bubble map component from scratch. Comes with explanations, code sandboxes, and ready-to-use templates."/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><meta name="keywords" content="React, D3, D3.js, data, dataviz, data visualization, DOM, web, dev, chart, graph"/><meta name="author" content="Yan Holtz"/><meta property="og:title" content="How to build a bubble map component with React and D3."/><meta property="og:description" content="A step-by-step guide to build your very own bubble map component from scratch. Comes with explanations, code sandboxes, and ready-to-use templates."/><meta property="og:image" content="https://raw.githubusercontent.com/holtzy/react-graph-gallery/main/public/overview-gallery.png"/><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/media/a782bc8f0acd0968-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/02205c9944024f15-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/934c4b7cb736f2a3-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/627622453ef56b0d-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/0e4fe491bf84089c-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/8db47a8bf03b7d2f-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/8f32c48a86b1398a-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/498cd24af98ee1c5-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/e0c8a07f5438bca2-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/ca8984a70353e894.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ca8984a70353e894.css" data-n-g=""/><link rel="preload" href="/_next/static/css/537902226fc25775.css" as="style"/><link rel="stylesheet" href="/_next/static/css/537902226fc25775.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-a707e99c69361791.js" defer=""></script><script src="/_next/static/chunks/framework-0d6ea1a7548c6e4f.js" defer=""></script><script src="/_next/static/chunks/main-a192e1d256adfc34.js" defer=""></script><script src="/_next/static/chunks/pages/_app-98c834a394d6a618.js" defer=""></script><script src="/_next/static/chunks/3996-a4c96d7d78feb6f0.js" defer=""></script><script src="/_next/static/chunks/7875-21de859f24f5cf21.js" defer=""></script><script src="/_next/static/chunks/5660-b8db8bc796807373.js" defer=""></script><script src="/_next/static/chunks/2236-8bd9f36cdf4ac8bf.js" defer=""></script><script src="/_next/static/chunks/645-e94cdb1e7b8f3a34.js" defer=""></script><script src="/_next/static/chunks/1188-5f3db63108894d49.js" defer=""></script><script src="/_next/static/chunks/9421-5e6efef247940edd.js" defer=""></script><script src="/_next/static/chunks/8937-b3590872dfd3b263.js" defer=""></script><script src="/_next/static/chunks/pages/bubble-map-15a2e68c89884a17.js" defer=""></script><script src="/_next/static/UBQTmDN8vcB9XA8IpsTk4/_buildManifest.js" defer=""></script><script src="/_next/static/UBQTmDN8vcB9XA8IpsTk4/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main class="__variable_e0eb98 __variable_9bfd88"><div class="wrapper"><nav id="header" class="w-full  h-24"><div class="flex flex-wrap items-center justify-between mt-2 py-2"><div class="flex items-center"><a href="/"><span class="ml-2 text-black text-md lg:text-md cursor-pointer">The <span class="gradient">React</span> Graph Gallery</span></a></div><div class=""><a class="no-underline" href="/all"><span class="hidden cursor-pointer sm:inline pl-8 text-black font-light text-sm lg:text-md uppercase tracking-wider hover:text-reactGallery">All</span></a><span class="hidden sm:inline pl-8 text-black font-light text-sm lg:text-md uppercase tracking-wider cursor-pointer hover:text-reactGallery hiden">Chart types</span><a class="no-underline" href="/about"><span class="hidden cursor-pointer sm:inline pl-8 text-black font-light text-sm lg:text-md uppercase tracking-wider hover:text-reactGallery">About</span></a><a href="https://datavizuniverse.substack.com" style="text-decoration:none"><span class="hidden cursor-pointer sm:inline ml-8 text-black font-light text-sm lg:text-md uppercase tracking-wider hover:text-reactGallery border border-gray-300 rounded-md p-2">Subscribe</span></a></div></div><hr class="border-b border-gray-100 opacity-25 my-0 py-0"/></nav></div><div class="wrapper"><div class="w-full pt-1 sm:pt-28 pb-20 "><div class="flex justify-start items-center"><h1>Bubble Map</h1><div class="w-20 ml-4"><img alt="Dataviz logo representing a BubbleMap chart." src="/section/BubbleMap150.png" width="100%" height="100%"/></div></div><hr class="smallHr"/><div class="max-w-xxl  py-2"><p>A<!-- --> <a href="https://www.data-to-viz.com/graph/bubblemap.html" target="_blank">bubble map</a> <!-- -->uses <b>circles</b> of different size to represent a numeric value on a territory. It displays one bubble per geographic coordinate, or one bubble per region.</p><p>This page explains how to build bubble maps for the web using<!-- --> <code>d3.js</code> and <code>react</code>. Several tools can be used to display the <a href="/map">background map</a> as shown in the dedicated section. Circles are then computed with <code>d3</code> and render using SVG or canvas elements with <code>react</code>.</p><p>Examples start <b>easy</b> and add layers of <b>complexity</b> <!-- -->progressively. You will always find <b>explanations</b> and<!-- --> <b>code sandboxes</b> for each step.</p></div><span class="text-gray-400 text-sm font-light">Useful links</span><div class="flex flex-row flex-wrap"><span class="tooltip_tooltip__b_kg5 tooltip_bottom__MVFNa" id="Hundreds of stunning dataviz projects to gather inspiration"><a href="https://www.dataviz-inspiration.com/bubbleMap" target="_blank"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-white hover:bg-reactGallery hover:text-white text-reactGallery text-sm py-1 px-2 ">inspiration</span></a></span><span class="tooltip_tooltip__b_kg5 tooltip_bottom__MVFNa" id="Pure d3 implementation, no React"><a href="https://www.d3-graph-gallery.com/bubblemap" target="_blank"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-white hover:bg-reactGallery hover:text-white text-reactGallery text-sm py-1 px-2 ">d3 gallery</span></a></span><span class="tooltip_tooltip__b_kg5 tooltip_bottom__MVFNa" id="Dataviz theory about this chart"><a href="https://www.data-to-viz.com/graph/bubblemap.html" target="_blank"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-reactGallery hover:bg-reactGallery text-white text-sm py-1 px-2 ">About this chart</span></a></span></div></div><h2 id="data">The Data</h2><p>Two pieces of information are required to build a bubble map:</p><h3>‚Üí Geographic information</h3><p>The first thing you need is the 2d coordinates of the <b>boundaries</b> <!-- -->of the regions you want to represent. If you are trying to build a world map, you need to know where the country boundaries are located ü§∑‚Äç‚ôÄÔ∏è.</p><p>Several formats exist to store such a piece of information. When working with d3.js, the expected format is<!-- --> <a href="https://en.wikipedia.org/wiki/GeoJSON" target="_blank">geoJSON</a>. A geoJSON file looks pretty much like this:</p><br/><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Point&quot;,
        &quot;coordinates&quot;: [102.0, 0.5]
      },
      &quot;properties&quot;: {
        &quot;prop0&quot;: &quot;value0&quot;
      }
    },
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;LineString&quot;,
        &quot;coordinates&quot;: [
          [102.0, 0.0],
          [103.0, 1.0],
          [104.0, 0.0],
          [105.0, 1.0]
        ]
      },
      &quot;properties&quot;: {
        &quot;prop0&quot;: &quot;value0&quot;,
        &quot;prop1&quot;: 0.0
      }
    },
    ...
  ]
}</code></pre></div><p>It is basically an object, with a <code>features</code> property that is of great interest. This prop is an <code>array</code>, each item of the array being a shape that we will be able to draw.</p><p>This format is extensively described in the<!-- --> <a href="/map">background map</a> section of the gallery. It explains how it is structured, where to find it, how to work with it and how to draw its content. Check it out!</p><a href="/map"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-reactGallery hover:bg-reactGallery text-white text-sm py-1 px-2 ">Map section</span></a><h3>‚Üí Numeric information</h3><p>We need another piece of information that provides a numeric value for each region of the geoJson file. This information will encode the<!-- --> <b>size</b>of the bubbles.</p><p>You can include any information in this array. But you need a prop (<code>code</code> here) that allows to make the link with the regions of the geoJson file.</p><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">[
  {
    &quot;name&quot;: &quot;Antigua and Barbuda&quot;,
    &quot;code&quot;: &quot;ATG&quot;,
    &quot;pop&quot;: 83039
  },
  {
    &quot;name&quot;: &quot;Algeria&quot;,
    &quot;code&quot;: &quot;DZA&quot;,
    &quot;pop&quot;: 32854159
  },
  ...
]
}</code></pre></div><h2 id="background">Basic background map</h2><p>The first step is to build the background map. Basically, we need to transform the set of spherical coordinates of the geoJson file into a set of 2d coordinates and draw them.</p><p>Fortunately, the <code>d3-geo</code> module of d3.js has everything we need for this. It relies on the <code>d3.geoPath()</code> function and the whole process is extensively described in the<!-- --> <a href="/map">background map section</a> of the gallery.</p><a href="/map"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-reactGallery hover:bg-reactGallery text-white text-sm py-1 px-2 ">Map section</span></a><div style="margin-left:-50vw;left:50%" class="my-4 py-4 w-screen relative"><div class="flex flex-col items-center justify-center"><div class="bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none"><div style="height:500px;width:100%;max-width:900px" class="pointer-events-auto"></div></div><p class="text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light">First very basic map made with d3.js and React. Check the map section for more code explanation.</p><div class="flex justify-center"><button class="rounded m-1 cursor-pointer border-reactGallery border text-sm py-1 px-2 bg-white hover:bg-reactGallery hover:text-white text-reactGallery">Show code</button></div></div></div><p>Note: I removed Antartica and chose the most famous yet highly criticiced: Mercator.</p><h2 id="bubbles">Adding the bubbles</h2><p>Now, we need to add a <b>bubble</b> on top of each country to represent its population.</p><p>The process is very close to what is described in the<!-- --> <a href="/bubble-plot">bubble chart</a> section of the gallery. So please take a look there for more in-depth explanations.</p><a href="/bubble-plot"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-reactGallery hover:bg-reactGallery text-white text-sm py-1 px-2 ">Bubble chart section</span></a><p><br/></p><p>We need a scale to translate the numeric <b>value</b> of a data point into the <b>radius</b> of its circle. This is made possible thanks to the <code>scaleSqrt()</code> function that can be used as follow:</p><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">const sizeScale = d3
  .scaleSqrt()
  .domain([min, max])
  .range([BUBBLE_MIN_SIZE, BUBBLE_MAX_SIZE]);</code></pre></div><p>Once this <code>sizeScale</code> is available, I can loop through all items of my dataset and draw a SVG circle for each. From each point<!-- --> <code>value</code>, <code>sizeScale</code> will provide me the radius that I can pass to the <code>r</code> attribute of the<!-- --> <code>circle</code> SVG element.</p><p><br/></p><p>We also need to find the <code>x</code> and <code>y</code> 2d coordinates of each circle. There are 2 use cases for this:</p><ul><li>circle at the <b>center of the region</b>: it is possible to determine the position of the <b>baricenter</b> of each region of the geoJson file thanks to the <code>centroid()</code> function of the path generator. See the world bubble map below.</li><li>circle at <b>precise GPS coordinates</b>: sometimes the data containing the numeric value of each bubble also provides the gps coordinates where it needs to be drawn. Note that in this case those coordinates must be translated for the current projection! (see the<!-- --> <a href="/bubble-map#transition">transition section</a> below)</li></ul><div style="margin-left:-50vw;left:50%" class="my-4 py-4 w-screen relative"><div class="flex flex-col items-center justify-center"><div class="bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none"><div style="height:600px;width:100%;max-width:900px" class="pointer-events-auto"></div></div><p class="text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light">A very simple bubble chart made using d3.js and react, based on a geoJson file.</p><div class="flex justify-center"><button class="rounded m-1 cursor-pointer border-reactGallery border text-sm py-1 px-2 bg-white hover:bg-reactGallery hover:text-white text-reactGallery">Show code</button></div></div></div><h2 id="legend">Bubble legend</h2><p>There are<!-- --> <a href="https://d3-graph-gallery.com/graph/custom_legend.html">many different ways</a> <!-- -->to add a legend to a d3.js graph. What we mainly need here is to make sense of the <b>bubble size</b>. I suggest using a set of <b>nested</b> <!-- -->bubbles, showing a few of the bubble sizes used on the chart with their respective values.</p><div style="margin-left:-50vw;left:50%" class="my-4 py-4 w-screen relative"><div class="flex flex-col items-center justify-center"><div class="bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none"><div style="height:300px;width:100%;max-width:300px" class="pointer-events-auto"><div style="width:0;height:300px;display:flex;justify-content:center;align-items:center"><svg width="160" height="160" overflow="visible"><g><circle cx="80" cy="160" r="0" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="160" y2="160" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="160" font-size="10" alignment-baseline="middle">0</text></g><g><circle cx="80" cy="124.22291236000336" r="35.77708763999664" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="88.44582472000673" y2="88.44582472000673" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="88.44582472000673" font-size="10" alignment-baseline="middle">20</text></g><g><circle cx="80" cy="109.40355743730592" r="50.59644256269407" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="58.807114874611855" y2="58.807114874611855" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="58.807114874611855" font-size="10" alignment-baseline="middle">40</text></g><g><circle cx="80" cy="98.03226646068133" r="61.96773353931867" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="36.064532921362655" y2="36.064532921362655" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="36.064532921362655" font-size="10" alignment-baseline="middle">60</text></g><g><circle cx="80" cy="88.44582472000673" r="71.55417527999327" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="16.891649440013452" y2="16.891649440013452" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="16.891649440013452" font-size="10" alignment-baseline="middle">80</text></g><g><circle cx="80" cy="80" r="80" fill="none" stroke="black"></circle><line x1="80" x2="170" y1="0" y2="0" stroke="black" stroke-dasharray="2,2"></line><text x="174" y="0" font-size="10" alignment-baseline="middle">100</text></g></svg></div></div></div><p class="text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light">A legend to make sense of circle size, based on a d3 scale.</p><div class="flex justify-center"><button class="rounded m-1 cursor-pointer border-reactGallery border text-sm py-1 px-2 bg-white hover:bg-reactGallery hover:text-white text-reactGallery">Show code</button></div></div></div><p>This legend is implemented in a <code>BubbleLegend</code> component that expects 2 props:<!-- --> </p><ul><li><code>scale</code>: the size scale that we described<!-- --> <a href="#bubble">above</a>, built with the <code>scaleSqrt</code> <!-- -->function.</li><li><code>tickNumber</code>: the number of circles to show on the legend.</li></ul><p>Note that <code>tickNumber</code> is a target. The legend component uses the <code>tick()</code> function with this value, which returns a smart number of circle to approximate the goal while keeping some nice, smart values.</p><p>You can check the complete implementation of the legend here:</p><details class="bg-gray-50 py-2 px-4 rounded-md my-2"><summary class="cursor-pointer"><span><code>BubbleLegend</code>: a component to build a legend for circle sizes</span></summary><div class="pt-4"><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">type BubbleLegendProps = {
  scale: d3.ScaleLinear&lt;number, number, never&gt;;
  tickNumber: number;
};

export const BubbleLegend = ({ scale, tickNumber }: BubbleLegendProps) =&gt; {
  const ticks = scale.ticks(tickNumber);
  const maxValue = ticks[ticks.length - 1];

  const diameter = scale(maxValue) * 2; // diameter of the biggest circle

  const dashWidth = diameter / 2 + 10;

  const allCircles = ticks.map((tick, i) =&gt; {
    const xCenter = diameter / 2;
    const yCircleTop = diameter - 2 * scale(tick);
    const yCircleCenter = diameter - scale(tick);

    return (
      &lt;g key={i}&gt;
        &lt;circle
          cx={xCenter}
          cy={yCircleCenter}
          r={scale(tick)}
          fill=&quot;none&quot;
          stroke=&quot;black&quot;
        /&gt;
        &lt;line
          x1={xCenter}
          x2={xCenter + dashWidth}
          y1={yCircleTop}
          y2={yCircleTop}
          stroke=&quot;black&quot;
          strokeDasharray={&quot;2,2&quot;}
        /&gt;
        &lt;text
          x={xCenter + dashWidth + 4}
          y={yCircleTop}
          fontSize={10}
          alignmentBaseline=&quot;middle&quot;
        &gt;
          {tick}
        &lt;/text&gt;
      &lt;/g&gt;
    );
  });

  return (
    &lt;svg width={diameter} height={diameter} overflow=&quot;visible&quot;&gt;
      {allCircles}
    &lt;/svg&gt;
  );
};</code></pre></div></div></details><p>It&#x27;s important to note that the component does <b>not</b> expect any dimension as prop. The <code>width</code> and <code>height</code> of the SVG element that is created will be computed from the <code>scale</code> <!-- -->that is provided.</p><p>As a result, you only need to think about the position of the legend on your chart. Check a few example of charts using this component.</p><p><br/></p><div class="grid grid-cols-2 sm:grid-cols-3 gap-4"><figure class="graphLinkImage_container__vhwty"><img src="/chart/bubble-plot-with-legend.png" alt="Picture of a simple bubble plot with a legend made with react and d3.js"/><figcaption><p class="graphLinkImage_title__zwMK0"><b>Bubble plot</b></p><div class="font-light"><p>Learn how to build a bubble plot with react and d3.js</p></div><a href="/bubble-plot"></a></figcaption></figure></div><h2 id="responsiveness">Responsive Bubble with react</h2><p>The component above is not responsive. It expects 2 props called<!-- --> <code>width</code> and <code>height</code> and will render a <!-- -->Bubble<!-- --> of those dimensions.</p><p>Making the <!-- -->Bubble<!-- --> responsive requires adding a <b>wrapper</b> component that gets the dimension of the parent <code>div</code>, and listening to a potential dimension change. This is possible thanks to a hook called<!-- --> <code>useDimensions</code> that will do the job for us.</p><details class="bg-gray-50 py-2 px-4 rounded-md my-2"><summary class="cursor-pointer"><span><code>useDimensions</code>: a hook to make your viz responsive</span></summary><div class="pt-4"><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">export const useDimensions = (targetRef: React.RefObject&lt;HTMLDivElement&gt;) =&gt; {

  const getDimensions = () =&gt; {
    return {
      width: targetRef.current ? targetRef.current.offsetWidth : 0,
      height: targetRef.current ? targetRef.current.offsetHeight : 0
    };
  };

  const [dimensions, setDimensions] = useState(getDimensions);

  const handleResize = () =&gt; {
    setDimensions(getDimensions());
  };

  useEffect(() =&gt; {
    window.addEventListener(&quot;resize&quot;, handleResize);
    return () =&gt; window.removeEventListener(&quot;resize&quot;, handleResize);
  }, []);

  useLayoutEffect(() =&gt; {
    handleResize();
  }, []);

  return dimensions;
}</code></pre></div></div></details><p>I&#x27;m in the process of writing a complete blog post on the topic.<!-- --> <a href="/subscribe">Subscribe to the project</a> to know when it&#x27;s ready.</p><br/><br/><br/><h2 id="transition">Smooth dataset transition</h2><p>How can we <b>smoothly animate</b> the transition between 2 datasets on a bubble chart? The chart used in this blog post can be drawn for several different years. You can use the select button on top to select the year, and the bubbles will <b>animate</b> to their new size.</p><p>This is possible thanks to the<!-- --> <a href="https://react-spring.dev/">react spring</a> library. Basically, instead of rendering usual <code>circle</code> elements, the library provides an <code>animated.circle</code> element, that is linked to a<!-- --> <code>useSpring</code> hook.</p><p>This is what the <code>Circle</code> component I use looks like:</p><details class="bg-gray-50 py-2 px-4 rounded-md my-2"><summary class="cursor-pointer"><span><code>Circle</code>: a component that animates the transition of a<!-- --> <code>circle</code></span></summary><div class="pt-4"><div class="mb-6"><pre class="rounded-md line-numbers"><code class="p-0 language-js">import { useSpring, animated } from &quot;@react-spring/web&quot;;

type CircleProps = {
  color: string;
  r: number;
  cx: number;
  cy: number;
};

export const Circle = (props: CircleProps) =&gt; {
  const { cx, cy, r, color } = props;

  const springProps = useSpring({
    to: { cx, cy, r },
    config: {
      friction: 30,
    },
    delay: 0,
  });

  return (
    &lt;animated.circle
      cx={springProps.cx}
      cy={springProps.cy}
      r={springProps.r}
      opacity={0.7}
      stroke={color}
      fill={color}
      fillOpacity={0.3}
      strokeWidth={1}
    /&gt;
  );
};</code></pre></div></div></details><div style="margin-left:-50vw;left:50%" class="my-4 py-4 w-screen relative"><div class="flex flex-col items-center justify-center"><div class="bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none"><div style="height:600px;width:100%;max-width:822px" class="pointer-events-auto"></div></div><p class="text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light">A bubble chart component that smoothly animates changes between datasets.</p><div class="flex justify-center"><button class="rounded m-1 cursor-pointer border-reactGallery border text-sm py-1 px-2 bg-white hover:bg-reactGallery hover:text-white text-reactGallery">Show code</button></div></div></div><p><b>Animation</b> in dataviz using React is a <b>big</b> topic. It&#x27;s impossible to go in-depth here! I will publish a dedicated blog post on the topic soon. Please <a href="/subscribe">subscribe</a> to the newsletter if you want to be notified.</p><h2 id="inspiration">Bubble inspiration</h2><p>If you&#x27;re looking for inspiration to create your next<!-- --> <span>Bubble</span>, note that<!-- --> <a href="https://www.dataviz-inspiration.com">dataviz-inspiration.com</a> <!-- -->showcases many examples. Definitely the best place to get ... inspiration!</p><div class="border mb-10"><div class="relative"><div style="background-image:url(https://github.com/holtzy/dataviz-inspiration/blob/main/public/misc/overview1.png?raw=true);height:250px;background-attachment:fixed;opacity:0.3;background-position:center;background-repeat:no-repeat;background-size:cover"></div><div class="absolute top-0 left-0 w-full h-full"><div class="flex justify-center items-center h-full"><div style="max-width:400px" class="flex flex-col items-center"><p class="text-center text-sm"><a href="https://www.dataviz-inspiration.com">dataviz-inspiration.com</a> <!-- -->showcases hundreds of stunning dataviz projects. Have a look to get some ideas on how to make your <span>Bubble</span> <!-- -->looks good!</p><a href="https://www.dataviz-inspiration.com" target="_blank"><span class="font-normal rounded mr-1 cursor-pointer border-reactGallery border  bg-reactGallery hover:bg-reactGallery text-white text-md py-2 px-4 ">visit</span></a></div></div></div></div></div><div class="full-bleed border-t h-0 bg-gray-100 mb-3 mt-24"></div><div><p class="map  mt-4 text-md border-b mb-2 border-gray-100 tracking-wider">Map</p><div class="flex flex-row justify-start flex-wrap"><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/map"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a Map chart." src="/section/Map150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Map</p></div></a></div><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/choropleth-map"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a Choropleth chart." src="/section/Choropleth150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Choropleth</p></div></a></div><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/hexbin-map"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a MapHexbin chart." src="/section/MapHexbin150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Hexbin</p></div></a></div><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/cartogram"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a Cartogram chart." src="/section/Cartogram150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Cartogram</p></div></a></div><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/connection-map"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a ConnectedMap chart." src="/section/ConnectedMap150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Connection</p></div></a></div><div class="flex flex-col items-center justify-center"><a class="no-underline" href="/bubble-map"><div class="flex flex-col items-center"><div style="width:129px;height:129px" class="relative mr-2 rounded-full opacity-100 cursor-pointer"><div class="absolute"><img alt="Dataviz logo representing a BubbleMap chart." src="/section/BubbleMap150.png" width="129px" height="129px"/></div><div style="background-color:var(--react-gallery)" class="opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30"><span class="text-white text-4xl">+</span></div></div><p class="font-light text-sm text-gray-600 opacity-100">Bubble</p></div></a></div></div></div><div class="mt-20"></div></div><div class="grey-section full-bleed py-24 flex flex-row justify-center  "><div class="max-w-xl flex flex-col justify-center items-center px-4"><h2 class="uppercase text-xl text-center">Contact</h2><p class="text-center">üëã Hey, I&#x27;m <a href="https://www.yan-holtz.com">Yan</a> and I&#x27;m currently working on this project!<br/><br/>Feedback is welcome ‚ù§Ô∏è. You can<!-- --> <a href="https://github.com/holtzy/react-graph-gallery/issues">fill an issue</a> <!-- -->on Github, drop me a message on<!-- --> <a href="https://twitter.com/r_graph_gallery?lang=en">Twitter</a>, or even send me an email pasting <code>yan.holtz.data</code> with<!-- --> <code>gmail.com</code>. You can also <a href="/subscribe">subscribe</a> to the newsletter to know when I publish more content!</p></div></div><div class="wrapper"><div class="h-24 w-full grid grid-cols-3 gap-1 "><div class="text-sm font-light flex flex-row justify-start items-center mt-1"><span class="hidden sm:inline">Copyright ¬© the <span class="gradient">React</span> Graph Gallery 2023</span></div><div class="flex flex-row justify-center items-center "><div class="flex flex-row my-2"><a href="https://github.com/holtzy" class="mr-1 h-8 w-8 rounded-full bg-black text-white hover:text-purple-200 flex justify-center"><svg width="21" aria-hidden="true" focusable="false" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://twitter.com/R_Graph_Gallery" class="mr-1 h-8 w-8 rounded-full bg-black text-white hover:text-purple-200 flex justify-center"><svg width="15" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://www.linkedin.com/in/yan-holtz-2477534a/" class="mr-1 h-8 w-8 rounded-full bg-black text-white hover:text-purple-200 flex justify-center"><svg width="15" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a><a href="https://www.yan-holtz.com" class="mr-1 h-8 w-8 rounded-full bg-black text-white hover:text-purple-200 flex justify-center"><svg width="20" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg></a></div></div><div class="text-sm font-light flex flex-row justify-end items-center mt-1"><span class="hidden sm:inline"><span>About</span><span> | </span><span>License</span></span></div></div></div><div class="table-of-content_tableOfContent__jj0Ai"></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/bubble-map","query":{},"buildId":"UBQTmDN8vcB9XA8IpsTk4","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>